<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ex05</title>
</head>
<body>
<h1>DOM API - appendChild() 응용</h1>
<section>
  <img src="../img01.jpeg" style="height:200px;">
  <img src="../img02.jpeg" style="height:200px;">
  <img src="../img03.jpeg" style="height:200px;">
  <img src="../img04.jpeg" style="height:200px;">
  <img src="../img05.jpeg" style="height:200px;">
  <img src="../img06.jpeg" style="height:200px;">
</section>
<script>
"use strict"

// appendChild()를 이용하여 이미지 회전하기
// 

// img 태그의 부모 태그를 찾는다.
var parent = document.querySelector("section");

// 2초마다 부모 태그의 첫 번째 자식을 막내 자식으로 보낸다.
window.setInterval(() => {
    // 첫 번째 이미지를 찾는다.
    var img = document.querySelector("section > img:first-child");
    
    // 찾은 이미지를 부모의 막내 자식으로 추가한다.
    // => 이미 존재하는 태그를 추가하면 또 추가되는 것이 아니라 
    //    기존 위치에서 맨 끝으로 이동하게 된다.
    parent.appendChild(img);
}, 1000);




</script>
</body>
</html>





<script>
  const btn_submit = document.querySelector('#btn_submit')
  btn_submit.addEventListener("click", () => {
    var markupStr = $('#summernote').summernote('code');
    console.log(markupStr);
  })
  $(document).ready(function () {

    $('#summernote').summernote({
      height: 300,
      width: 500,
      callbacks: {
        //여기 부분이 이미지를 첨부하는 부분
        onImageUpload: function (files) {
          uploadSummernoteImageFile(files[0], this);
        },
        onPaste: function (e) {
          var clipboardData = e.originalEvent.clipboardData;
          if (clipboardData && clipboardData.items && clipboardData.items.length) {
            var item = clipboardData.items[0];
            if (item.kind === 'file' && item.type.indexOf('image/') !== -1) {
              e.preventDefault();
            }
          }
        }
      }

      /**
  * 이미지 파일 업로드
  */
 function uploadSummernoteImageFile(file, editor) {
      data = new FormData();
      data.append("file", file);
      $.ajax({
        data: data,
        type: "POST",
        url: "/uploadSummernoteImageFile",
        contentType: false,
        processData: false,
        success: function (data) {
          //항상 업로드된 파일의 url이 있어야 한다.
          $(editor).summernote('insertImage', data.url);
        }
      });

    })})
</script>

